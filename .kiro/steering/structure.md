# Project Structure

## Directory Layout

```
.
├── src/                          # Source TypeScript files
│   ├── index.ts                  # Main Vitest component export
│   ├── bundle-define-config.ts   # Build script for bundling
│   ├── bundled-define-config.ts  # Bundled Vitest config helper
│   └── define-config-entry.ts    # Config entry point
├── lib/                          # Compiled JavaScript output
├── dist/                         # JSII multi-language packages
├── test/                         # Test files (*.test.ts)
├── .projen/                      # Projen metadata
├── .kiro/                        # Kiro steering rules
├── .github/                      # GitHub workflows
└── .projenrc.ts                  # Projen project configuration
```

## Key Files

- **`.projenrc.ts`**: Single source of truth for project configuration. All build settings, dependencies, and tooling configuration are defined here. Running `npx projen` regenerates derived files.

- **`src/index.ts`**: Main entry point exporting the `Vitest` class and related enums/interfaces.

- **`package.json`**: Generated by projen. Do not edit manually - modify `.projenrc.ts` instead.

- **`tsconfig.json`**: Generated by projen/JSII. Configures TypeScript compilation from `src/` to `lib/`.

- **`vitest.config.ts`**: Generated by the Vitest component itself. Demonstrates the output of the component.

- **`biome.jsonc`**: Generated by projen. Configures Biome formatter and linter.

## Architecture Patterns

### Component-Based Design

The `Vitest` class extends projen's `Component` class, following projen's component architecture pattern. Components:
- Are attached to a project
- Can synthesize files during project synthesis
- Can interact with other components
- Have lifecycle hooks (preSynthesize, postSynthesize)

### Configuration Generation

The component dynamically generates `vitest.config.ts` based on provided options. The config file is regenerated on each synthesis to reflect current settings.

### Self-Hosting

The project uses itself for testing - the `Vitest` component is instantiated in `.projenrc.ts` to test the project, demonstrating dogfooding.

## File Naming Conventions

- Source files: `kebab-case.ts`
- Test files: `*.test.ts` or `*.spec.ts`
- Config files: `<tool>.config.ts`
- Type definitions: `*.d.ts` (generated)

## Generated vs Source Files

**Source files** (edit these):
- `src/**/*.ts`
- `.projenrc.ts`
- `test/**/*.test.ts`

**Generated files** (do not edit):
- `package.json`
- `tsconfig.json`
- `tsconfig.dev.json`
- `.github/workflows/**`
- `.projen/**`
- `lib/**`
- `dist/**`
- Files with "Generated by projen" comment

## Import Patterns

- Use Node.js built-in imports with `node:` prefix: `import * as path from "node:path"`
- Import from projen submodules: `import { Component } from "projen/lib/component"`
- Relative imports for local modules: `import { Vitest } from "./src"`
